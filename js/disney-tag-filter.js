"use strict";const escapeHtml=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},initLoadingScreen=()=>{const e=document.getElementById("loading-overlay"),t=document.getElementById("main-content"),o=document.getElementById("progress-bar"),s=document.getElementById("progress-text"),n=document.getElementById("loading-details");if(!(e&&t&&o&&s&&n))return;const a=!0===window.isPreview,r=e=>{a&&console.log(e)};let l=0;const i=setInterval(()=>{l+=2*Math.random(),l>85&&(l=85),o.style.width=`${l}%`,s.textContent=`${Math.floor(l)}%`},50);(async()=>{r("Starting resource loading detection...");const e=[];r("Waiting for fonts to load..."),e.push(document.fonts.ready.then(()=>{r("Fonts loaded"),l=90,o.style.width="90%",s.textContent="90%",n.textContent="Loading images..."}));const t=document.querySelectorAll("img");if(r(`Found ${t.length} images to load`),0===t.length)e.push(Promise.resolve().then(()=>{l=95,o.style.width="95%",s.textContent="95%",n.textContent="Loading stylesheets..."}));else{const a=Array.from(t).map((e,o)=>new Promise(s=>{if(r(`Image ${o+1}/${t.length}: ${e.src}, complete: ${e.complete}, naturalHeight: ${e.naturalHeight}`),e.complete&&0!==e.naturalHeight)return r(`Image ${o+1} already loaded`),void s();const n=()=>{r(`Image ${o+1} loaded successfully`),e.removeEventListener("load",n),e.removeEventListener("error",a),s()},a=()=>{r(`Image ${o+1} failed to load`),e.removeEventListener("load",n),e.removeEventListener("error",a),s()};e.addEventListener("load",n),e.addEventListener("error",a),e.complete&&setTimeout(()=>{e.complete&&0!==e.naturalHeight||(r(`Image ${o+1} fallback: treating as loaded`),s())},100)}));e.push(Promise.all(a).then(()=>{r("All images loaded"),l=95,o.style.width="95%",s.textContent="95%",n.textContent="Loading stylesheets..."}))}const a=document.querySelectorAll('link[rel="stylesheet"]');if(r(`Found ${a.length} stylesheets to load`),0===a.length)e.push(Promise.resolve().then(()=>{l=97,o.style.width="97%",s.textContent="97%",n.textContent="Loading JavaScript..."}));else{const t=Array.from(a).map((e,t)=>new Promise(o=>{if(r(`Stylesheet ${t+1}/${a.length}: ${e.href}, sheet: ${!!e.sheet}`),e.sheet)return r(`Stylesheet ${t+1} already loaded`),void o();const s=()=>{r(`Stylesheet ${t+1} loaded successfully`),e.removeEventListener("load",s),e.removeEventListener("error",n),o()},n=()=>{r(`Stylesheet ${t+1} failed to load`),e.removeEventListener("load",s),e.removeEventListener("error",n),o()};e.addEventListener("load",s),e.addEventListener("error",n),e.sheet&&setTimeout(()=>{e.sheet||(r(`Stylesheet ${t+1} fallback: treating as loaded`),o())},100)}));e.push(Promise.all(t).then(()=>{r("All stylesheets loaded"),l=97,o.style.width="97%",s.textContent="97%",n.textContent="Loading JavaScript..."}))}const i=document.querySelectorAll("script[src]");if(r(`Found ${i.length} scripts to load`),0===i.length)e.push(Promise.resolve().then(()=>{l=98,o.style.width="98%",s.textContent="98%",n.textContent="Initializing page..."}));else{const t=Array.from(i).map((e,t)=>new Promise(o=>{const s=e.readyState,n=e.async,a=e.defer;r(`Script ${t+1}/${i.length}: ${e.src}`),r(`  - readyState: ${s}`),r(`  - async: ${n}`),r(`  - defer: ${a}`);let l=!1;const d=()=>{l||(l=!0,r(`Script ${t+1} loaded successfully`),e.removeEventListener("load",d),e.removeEventListener("error",c),o())},c=()=>{l||(l=!0,r(`Script ${t+1} failed to load`),e.removeEventListener("load",d),e.removeEventListener("error",c),o())};e.addEventListener("load",d),e.addEventListener("error",c);if(!(()=>{const o=e.src;if("complete"===s||"loaded"===s)return r(`Script ${t+1} already loaded (readyState: ${s})`),!0;if(Array.from(document.scripts).filter(t=>t.src===o&&t!==e).length>0)return r(`Script ${t+1} appears to be already loaded (duplicate found)`),!0;try{const o=e.readyState;if("complete"===o||"loaded"===o)return r(`Script ${t+1} already loaded (execution ready)`),!0}catch(e){}const n=performance.now()-(performance.timing?.navigationStart||0);return n>1e3&&(r(`Script ${t+1} likely already loaded (page load time: ${n.toFixed(0)}ms)`),!0)})())return void 0===s?(r(`Script ${t+1} readyState is undefined, checking if already loaded...`),n?(r(`Script ${t+1} is async, using short timeout`),void setTimeout(()=>{l||(r(`Script ${t+1} async script timeout`),l=!0,e.removeEventListener("load",d),e.removeEventListener("error",c),o())},1e3)):(r(`Script ${t+1} readyState undefined and not async, likely already loaded`),void setTimeout(()=>{l||(r(`Script ${t+1} treating as already loaded`),l=!0,e.removeEventListener("load",d),e.removeEventListener("error",c),o())},500))):void setTimeout(()=>{l||(r(`Script ${t+1} fallback: treating as loaded after timeout`),l=!0,e.removeEventListener("load",d),e.removeEventListener("error",c),o())},1e3);setTimeout(()=>{l||(l=!0,e.removeEventListener("load",d),e.removeEventListener("error",c),o())},100)}));e.push(Promise.all(t).then(()=>{r("All scripts loaded"),l=98,o.style.width="98%",s.textContent="98%",n.textContent="Initializing page..."}))}r("Waiting for DOMContentLoaded..."),e.push(new Promise(e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{r("DOMContentLoaded fired"),e()}):(r("DOMContentLoaded already fired"),e())})),r("Waiting for load event..."),e.push(new Promise(e=>{"complete"===document.readyState?(r("Load event already fired"),e()):window.addEventListener("load",()=>{r("Load event fired"),e()})})),r("Waiting for all resources to be ready..."),e.push(new Promise(e=>{const t=()=>{r(`Current document.readyState: ${document.readyState}`),"complete"===document.readyState?(r("Document is completely loaded"),e()):setTimeout(t,50)};t()})),r("Waiting for all resources to complete..."),await Promise.all(e),r("All resources loaded successfully")})().then(()=>{r("Starting final loading completion..."),clearInterval(i),l=100,o.style.width="100%",s.textContent="100%",n.textContent="Done!",setTimeout(()=>{r("Hiding loading overlay..."),e.classList.add("hidden"),t.classList.add("loaded"),setTimeout(()=>{r("Removing loading overlay..."),e.remove(),r("Loading process completed successfully!")},500)},500)}).catch(d=>{a&&console.error("Error during resource loading:",d),clearInterval(i),l=100,o.style.width="100%",s.textContent="100%",n.textContent="Done!",setTimeout(()=>{e.classList.add("hidden"),t.classList.add("loaded"),setTimeout(()=>{e.remove(),r("Loading process completed with errors")},500)},500)}),setTimeout(()=>{t.classList.contains("loaded")||(clearInterval(i),l=100,o.style.width="100%",s.textContent="100%",setTimeout(()=>{e.classList.add("hidden"),t.classList.add("loaded"),setTimeout(()=>{e.remove()},500)},500))},15e3)};"undefined"!=typeof window&&(window.escapeHtml=escapeHtml,window.initLoadingScreen=initLoadingScreen),"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",()=>{initLoadingScreen();const e=document.getElementsByClassName("tag-filter-btn"),t=document.getElementsByClassName("log-entry"),o=document.getElementsByClassName("selected-tags")[0],s=document.getElementsByClassName("selected-tags-list")[0],n=document.getElementById("clear-selection"),a=document.getElementById("toggle-tag-filter"),r=document.getElementsByClassName("tag-filter")[0],l=new Set;a&&r&&a.addEventListener("click",()=>{"none"!==r.style.display?(r.style.display="none",a.className=a.className.replace("is-info","is-outlined"),a.className.includes("is-outlined")||(a.className+=" is-outlined"),i(),c()):(r.style.display="block",a.className=a.className.replace("is-outlined","is-info"),a.className.includes("is-info")||(a.className+=" is-info"))});for(const t of Array.from(e))t.addEventListener("click",function(){const e=this.getAttribute("data-tag");e&&(this.classList.contains("active")?(this.classList.remove("active"),this.classList.add("is-outlined"),l.delete(e)):(this.classList.add("active"),this.classList.remove("is-outlined"),l.add(e)),d(),c())});n&&n.addEventListener("click",()=>{i(),c()});const i=()=>{l.clear();for(const t of Array.from(e))t.classList.remove("active"),t.classList.add("is-outlined");d()},d=()=>{if(o&&s)if(0===l.size)o.style.display="none";else{o.style.display="block";const e=Array.from(l).map(e=>{const t=document.querySelector(`[data-tag="${escapeHtml(e)}"]`),o=t?.style.borderColor||t?.style.color||"#363636";return`<span class="tag is-small" style="background-color: ${escapeHtml(o)}; color: white; margin-right: 0.5rem;">${escapeHtml(e)}</span>`}).join("");s.innerHTML=e}},c=()=>{for(const e of Array.from(t)){const t=e;if(0===l.size)t.style.display="block",e.classList.remove("filtered-out");else{const o=e.getAttribute("data-tags");if(o){const s=o.split(",").map(e=>e.trim());Array.from(l).every(e=>s.includes(e))?(t.style.display="block",e.classList.remove("filtered-out")):(t.style.display="none",e.classList.add("filtered-out"))}else t.style.display="none",e.classList.add("filtered-out")}}m()},m=()=>{const e=Array.from(t).filter(e=>!e.classList.contains("filtered-out"));for(const[t,o]of e.entries()){const e=o;e.style.opacity="0",e.style.transform="translateY(20px)",setTimeout(()=>{e.style.transition="opacity 0.3s ease, transform 0.3s ease",e.style.opacity="1",e.style.transform="translateY(0)"},50*t)}}});
