"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}c((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,o,a,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(6===s[0]&&r.label<a[1]){r.label=a[1],a=s;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(s);break}a[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},initLoadingScreen=function(){var e=document.getElementById("loading-overlay"),t=document.getElementById("main-content"),n=document.getElementById("progress-bar"),o=document.getElementById("progress-text"),a=document.getElementById("loading-details");if(e&&t&&n&&o&&a){var r=!0===window.isPreview,i=function(e){r&&console.log(e)},s=0,c=setInterval(function(){(s+=2*Math.random())>85&&(s=85),n.style.width=s+"%",o.textContent=Math.floor(s)+"%"},50);__awaiter(void 0,void 0,Promise,function(){var e,t,r,c,l,d,u;return __generator(this,function(f){switch(f.label){case 0:return i("Starting resource loading detection..."),e=[],i("Waiting for fonts to load..."),e.push(document.fonts.ready.then(function(){i("Fonts loaded"),s=90,n.style.width="90%",o.textContent="90%",a.textContent="Loading images..."})),t=document.querySelectorAll("img"),i("Found ".concat(t.length," images to load")),0===t.length?e.push(Promise.resolve().then(function(){s=95,n.style.width="95%",o.textContent="95%",a.textContent="Loading stylesheets..."})):(r=Array.from(t).map(function(e,n){return new Promise(function(o){if(i("Image ".concat(n+1,"/").concat(t.length,": ").concat(e.src,", complete: ").concat(e.complete,", naturalHeight: ").concat(e.naturalHeight)),e.complete&&0!==e.naturalHeight)return i("Image ".concat(n+1," already loaded")),void o();var a=function(){i("Image ".concat(n+1," loaded successfully")),e.removeEventListener("load",a),e.removeEventListener("error",r),o()},r=function(){i("Image ".concat(n+1," failed to load")),e.removeEventListener("load",a),e.removeEventListener("error",r),o()};e.addEventListener("load",a),e.addEventListener("error",r),e.complete&&setTimeout(function(){e.complete&&0!==e.naturalHeight||(i("Image ".concat(n+1," fallback: treating as loaded")),o())},100)})}),e.push(Promise.all(r).then(function(){i("All images loaded"),s=95,n.style.width="95%",o.textContent="95%",a.textContent="Loading stylesheets..."}))),c=document.querySelectorAll('link[rel="stylesheet"]'),i("Found ".concat(c.length," stylesheets to load")),0===c.length?e.push(Promise.resolve().then(function(){s=97,n.style.width="97%",o.textContent="97%",a.textContent="Loading JavaScript..."})):(l=Array.from(c).map(function(e,t){return new Promise(function(n){if(i("Stylesheet ".concat(t+1,"/").concat(c.length,": ").concat(e.href,", sheet: ").concat(!!e.sheet)),e.sheet)return i("Stylesheet ".concat(t+1," already loaded")),void n();var o=function(){i("Stylesheet ".concat(t+1," loaded successfully")),e.removeEventListener("load",o),e.removeEventListener("error",a),n()},a=function(){i("Stylesheet ".concat(t+1," failed to load")),e.removeEventListener("load",o),e.removeEventListener("error",a),n()};e.addEventListener("load",o),e.addEventListener("error",a),e.sheet&&setTimeout(function(){e.sheet||(i("Stylesheet ".concat(t+1," fallback: treating as loaded")),n())},100)})}),e.push(Promise.all(l).then(function(){i("All stylesheets loaded"),s=97,n.style.width="97%",o.textContent="97%",a.textContent="Loading JavaScript..."}))),d=document.querySelectorAll("script[src]"),i("Found ".concat(d.length," scripts to load")),0===d.length?e.push(Promise.resolve().then(function(){s=98,n.style.width="98%",o.textContent="98%",a.textContent="Initializing page..."})):(u=Array.from(d).map(function(e,t){return new Promise(function(n){var o=e.readyState,a=e.async,r=e.defer;i("Script ".concat(t+1,"/").concat(d.length,": ").concat(e.src)),i("  - readyState: ".concat(o)),i("  - async: ".concat(a)),i("  - defer: ".concat(r));var s=!1,c=function(){s||(s=!0,i("Script ".concat(t+1," loaded successfully")),e.removeEventListener("load",c),e.removeEventListener("error",l),n())},l=function(){s||(s=!0,i("Script ".concat(t+1," failed to load")),e.removeEventListener("load",c),e.removeEventListener("error",l),n())};if(e.addEventListener("load",c),e.addEventListener("error",l),!function(){var n,a=e.src;if("complete"===o||"loaded"===o)return i("Script ".concat(t+1," already loaded (readyState: ").concat(o,")")),!0;if(Array.from(document.scripts).filter(function(t){return t.src===a&&t!==e}).length>0)return i("Script ".concat(t+1," appears to be already loaded (duplicate found)")),!0;try{var r=e.readyState;if("complete"===r||"loaded"===r)return i("Script ".concat(t+1," already loaded (execution ready)")),!0}catch(e){}var s=performance.now()-((null===(n=performance.timing)||void 0===n?void 0:n.navigationStart)||0);return s>1e3&&(i("Script ".concat(t+1," likely already loaded (page load time: ").concat(s.toFixed(0),"ms)")),!0)}())return void 0===o?(i("Script ".concat(t+1," readyState is undefined, checking if already loaded...")),a?(i("Script ".concat(t+1," is async, using short timeout")),void setTimeout(function(){s||(i("Script ".concat(t+1," async script timeout")),s=!0,e.removeEventListener("load",c),e.removeEventListener("error",l),n())},1e3)):(i("Script ".concat(t+1," readyState undefined and not async, likely already loaded")),void setTimeout(function(){s||(i("Script ".concat(t+1," treating as already loaded")),s=!0,e.removeEventListener("load",c),e.removeEventListener("error",l),n())},500))):void setTimeout(function(){s||(i("Script ".concat(t+1," fallback: treating as loaded after timeout")),s=!0,e.removeEventListener("load",c),e.removeEventListener("error",l),n())},1e3);setTimeout(function(){s||(s=!0,e.removeEventListener("load",c),e.removeEventListener("error",l),n())},100)})}),e.push(Promise.all(u).then(function(){i("All scripts loaded"),s=98,n.style.width="98%",o.textContent="98%",a.textContent="Initializing page..."}))),i("Waiting for DOMContentLoaded..."),e.push(new Promise(function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){i("DOMContentLoaded fired"),e()}):(i("DOMContentLoaded already fired"),e())})),i("Waiting for load event..."),e.push(new Promise(function(e){"complete"===document.readyState?(i("Load event already fired"),e()):window.addEventListener("load",function(){i("Load event fired"),e()})})),i("Waiting for all resources to be ready..."),e.push(new Promise(function(e){var t=function(){i("Current document.readyState: ".concat(document.readyState)),"complete"===document.readyState?(i("Document is completely loaded"),e()):setTimeout(t,50)};t()})),i("Waiting for all resources to complete..."),[4,Promise.all(e)];case 1:return f.sent(),i("All resources loaded successfully"),[2]}})}).then(function(){i("Starting final loading completion..."),clearInterval(c),s=100,n.style.width="100%",o.textContent="100%",a.textContent="Done!",setTimeout(function(){i("Hiding loading overlay..."),e.classList.add("hidden"),t.classList.add("loaded"),setTimeout(function(){i("Removing loading overlay..."),e.remove(),i("Loading process completed successfully!")},500)},500)}).catch(function(l){r&&console.error("Error during resource loading:",l),clearInterval(c),s=100,n.style.width="100%",o.textContent="100%",a.textContent="Done!",setTimeout(function(){e.classList.add("hidden"),t.classList.add("loaded"),setTimeout(function(){e.remove(),i("Loading process completed with errors")},500)},500)}),setTimeout(function(){t.classList.contains("loaded")||(clearInterval(c),s=100,n.style.width="100%",o.textContent="100%",setTimeout(function(){e.classList.add("hidden"),t.classList.add("loaded"),setTimeout(function(){e.remove()},500)},500))},15e3)}};document.addEventListener("DOMContentLoaded",function(){initLoadingScreen();var e=document.getElementsByClassName("tag-filter-btn"),t=document.getElementsByClassName("log-entry"),n=document.getElementsByClassName("selected-tags")[0],o=document.getElementsByClassName("selected-tags-list")[0],a=document.getElementById("clear-selection"),r=document.getElementById("toggle-tag-filter"),i=document.getElementsByClassName("tag-filter")[0],s=new Set;r&&i&&r.addEventListener("click",function(){"none"!==i.style.display?(i.style.display="none",r.className=r.className.replace("is-info","is-outlined"),r.className.includes("is-outlined")||(r.className+=" is-outlined"),c(),u()):(i.style.display="block",r.className=r.className.replace("is-outlined","is-info"),r.className.includes("is-info")||(r.className+=" is-info"))}),Array.from(e).forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-tag");e&&(this.classList.contains("active")?(this.classList.remove("active"),this.classList.add("is-outlined"),s.delete(e)):(this.classList.add("active"),this.classList.remove("is-outlined"),s.add(e)),d(),u())})}),a&&a.addEventListener("click",function(){c(),u()});var c=function(){s.clear(),Array.from(e).forEach(function(e){e.classList.remove("active"),e.classList.add("is-outlined")}),d()},l=function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML},d=function(){if(n&&o)if(0===s.size)n.style.display="none";else{n.style.display="block";var e=Array.from(s).map(function(e){var t=document.querySelector('[data-tag="'.concat(l(e),'"]')),n=(null==t?void 0:t.style.borderColor)||(null==t?void 0:t.style.color)||"#363636";return'<span class="tag is-small" style="background-color: '.concat(l(n),'; color: white; margin-right: 0.5rem;">').concat(l(e),"</span>")}).join("");o.innerHTML=e}},u=function(){Array.from(t).forEach(function(e){var t=e;if(0===s.size)t.style.display="block",e.classList.remove("filtered-out");else{var n=e.getAttribute("data-tags");if(n){var o=n.split(",").map(function(e){return e.trim()});Array.from(s).every(function(e){return o.includes(e)})?(t.style.display="block",e.classList.remove("filtered-out")):(t.style.display="none",e.classList.add("filtered-out"))}else t.style.display="none",e.classList.add("filtered-out")}}),f()},f=function(){Array.from(t).filter(function(e){return!e.classList.contains("filtered-out")}).forEach(function(e,t){var n=e;n.style.opacity="0",n.style.transform="translateY(20px)",setTimeout(function(){n.style.transition="opacity 0.3s ease, transform 0.3s ease",n.style.opacity="1",n.style.transform="translateY(0)"},50*t)})}});
