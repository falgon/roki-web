"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vitest_1=require("vitest");require("../disney-tag-filter"),(0,vitest_1.describe)("disney-tag-filter.ts",()=>{(0,vitest_1.beforeEach)(()=>{document.body.innerHTML=""}),(0,vitest_1.describe)("escapeHtml",()=>{(0,vitest_1.it)("escapes HTML special characters",()=>{(0,vitest_1.expect)(escapeHtml("<script>alert('xss')<\/script>")).toBe("&lt;script&gt;alert('xss')&lt;/script&gt;")}),(0,vitest_1.it)("escapes ampersands",()=>{(0,vitest_1.expect)(escapeHtml("Tom & Jerry")).toBe("Tom &amp; Jerry")}),(0,vitest_1.it)("does not escape quotes when using textContent",()=>{(0,vitest_1.expect)(escapeHtml('"Hello World"')).toBe('"Hello World"')}),(0,vitest_1.it)("does not escape single quotes",()=>{(0,vitest_1.expect)(escapeHtml("It's a test")).toBe("It's a test")}),(0,vitest_1.it)("handles multiple special characters",()=>{(0,vitest_1.expect)(escapeHtml('<div class="test">A & B</div>')).toBe('&lt;div class="test"&gt;A &amp; B&lt;/div&gt;')}),(0,vitest_1.it)("handles empty string",()=>{(0,vitest_1.expect)(escapeHtml("")).toBe("")}),(0,vitest_1.it)("handles normal text without special characters",()=>{(0,vitest_1.expect)(escapeHtml("Hello World")).toBe("Hello World")}),(0,vitest_1.it)("handles newlines and spaces",()=>{(0,vitest_1.expect)(escapeHtml("Line 1\nLine 2")).toBe("Line 1\nLine 2")})}),(0,vitest_1.describe)("DOM structure",()=>{(0,vitest_1.it)("can create loading overlay structure",()=>{document.body.innerHTML='\n                <div id="loading-overlay"></div>\n                <div id="main-content"></div>\n                <div id="progress-bar"></div>\n                <div id="progress-text"></div>\n                <div id="loading-details"></div>\n            ';const t=document.getElementById("loading-overlay"),e=document.getElementById("main-content"),s=document.getElementById("progress-bar"),i=document.getElementById("progress-text"),n=document.getElementById("loading-details");(0,vitest_1.expect)(t).toBeTruthy(),(0,vitest_1.expect)(e).toBeTruthy(),(0,vitest_1.expect)(s).toBeTruthy(),(0,vitest_1.expect)(i).toBeTruthy(),(0,vitest_1.expect)(n).toBeTruthy()}),(0,vitest_1.it)("can create tag filter structure",()=>{document.body.innerHTML='\n                <div id="tag-filters">\n                    <button class="tag-filter-button" data-tag="tag1">Tag 1</button>\n                    <button class="tag-filter-button" data-tag="tag2">Tag 2</button>\n                </div>\n                <div id="selected-tags-list"></div>\n                <button id="clear-selection">Clear</button>\n                <div class="log-entry" data-tags="tag1,tag2">Entry 1</div>\n                <div class="log-entry" data-tags="tag2">Entry 2</div>\n            ';const t=document.getElementById("tag-filters"),e=document.querySelectorAll(".tag-filter-button"),s=document.getElementById("clear-selection"),i=document.querySelectorAll(".log-entry");(0,vitest_1.expect)(t).toBeTruthy(),(0,vitest_1.expect)(e.length).toBe(2),(0,vitest_1.expect)(s).toBeTruthy(),(0,vitest_1.expect)(i.length).toBe(2)})}),(0,vitest_1.describe)("tag filtering logic",()=>{(0,vitest_1.beforeEach)(()=>{document.body.innerHTML='\n                <div class="log-entry" data-tags="tag1,tag2">Entry 1</div>\n                <div class="log-entry" data-tags="tag2,tag3">Entry 2</div>\n                <div class="log-entry" data-tags="tag1">Entry 3</div>\n            '}),(0,vitest_1.it)("filters entries by single tag",()=>{const t=document.querySelectorAll(".log-entry"),e=Array.from(t).filter(t=>{const e=t.getAttribute("data-tags");return e?.includes("tag1")});(0,vitest_1.expect)(e.length).toBe(2)}),(0,vitest_1.it)("filters entries by multiple tags (AND condition)",()=>{const t=document.querySelectorAll(".log-entry"),e=["tag1","tag2"],s=Array.from(t).filter(t=>{const s=t.getAttribute("data-tags");if(!s)return!1;const i=s.split(",").map(t=>t.trim());return e.every(t=>i.includes(t))});(0,vitest_1.expect)(s.length).toBe(1)})})});
