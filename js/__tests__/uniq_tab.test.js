import{beforeEach,describe,expect,it}from"vitest";import"../uniq_tab";describe("uniq_tab.ts",()=>{beforeEach(()=>{document.body.innerHTML='\n            <ul id="tabs">\n                <li class="is-active" data-tab="tab1">Tab 1</li>\n                <li data-tab="tab2">Tab 2</li>\n                <li data-tab="tab3">Tab 3</li>\n            </ul>\n            <div id="tab-content">\n                <div class="is-active" data-content="tab1">Content 1</div>\n                <div data-content="tab2">Content 2</div>\n                <div data-content="tab3">Content 3</div>\n            </div>\n        '}),describe("updateActiveTab",()=>{it("removes is-active from all tabs and adds to selected",()=>{const t=[...document.querySelectorAll("#tabs li")],e=t[1];expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!0),expect(e.classList.contains(ACTIVE_CLASS)).toBe(!1),updateActiveTab(t,e),expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!1),expect(e.classList.contains(ACTIVE_CLASS)).toBe(!0)})}),describe("updateActiveContent",()=>{it("removes is-active from all content and adds to matching data-content",()=>{const t=[...document.querySelectorAll("#tab-content div")];expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!0),expect(t[1].classList.contains(ACTIVE_CLASS)).toBe(!1),updateActiveContent(t,"tab2"),expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!1),expect(t[1].classList.contains(ACTIVE_CLASS)).toBe(!0)}),it("handles content with no matching data-content",()=>{const t=[...document.querySelectorAll("#tab-content div")];updateActiveContent(t,"nonexistent"),expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!1),expect(t[1].classList.contains(ACTIVE_CLASS)).toBe(!1),expect(t[2].classList.contains(ACTIVE_CLASS)).toBe(!1)})}),describe("initTabs",()=>{it("sets up click handlers that switch tabs and content",()=>{const t=document.querySelectorAll("#tabs li"),e=document.querySelectorAll("#tab-content div");initTabs(),expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!0),expect(e[0].classList.contains(ACTIVE_CLASS)).toBe(!0),t[1].click(),expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!1),expect(t[1].classList.contains(ACTIVE_CLASS)).toBe(!0),expect(e[0].classList.contains(ACTIVE_CLASS)).toBe(!1),expect(e[1].classList.contains(ACTIVE_CLASS)).toBe(!0)}),it("handles clicking already active tab",()=>{const t=document.querySelectorAll("#tabs li"),e=document.querySelectorAll("#tab-content div");initTabs(),t[0].click(),expect(t[0].classList.contains(ACTIVE_CLASS)).toBe(!0),expect(e[0].classList.contains(ACTIVE_CLASS)).toBe(!0)})})});
