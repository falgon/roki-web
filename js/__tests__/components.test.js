import{beforeEach,describe,expect,it,vi}from"vitest";import"../components";describe("components.ts",()=>{beforeEach(()=>{document.body.innerHTML="",vi.clearAllMocks(),String.prototype.format=void 0}),describe("setupNavBar",()=>{it("toggles is-active class on burger and target when clicked",()=>{document.body.innerHTML='\n                <div class="navbar-burger" data-target="test-menu"></div>\n                <div id="test-menu"></div>\n            ',setupNavBar();const e=document.querySelector(".navbar-burger"),t=document.getElementById("test-menu");expect(e?.classList.contains("is-active")).toBe(!1),expect(t?.classList.contains("is-active")).toBe(!1),e.click(),expect(e?.classList.contains("is-active")).toBe(!0),expect(t?.classList.contains("is-active")).toBe(!0),e.click(),expect(e?.classList.contains("is-active")).toBe(!1),expect(t?.classList.contains("is-active")).toBe(!1)}),it("handles multiple navbar burgers",()=>{document.body.innerHTML='\n                <div class="navbar-burger" data-target="menu1"></div>\n                <div class="navbar-burger" data-target="menu2"></div>\n                <div id="menu1"></div>\n                <div id="menu2"></div>\n            ',setupNavBar();const[e,t]=document.querySelectorAll(".navbar-burger"),o=document.getElementById("menu1"),n=document.getElementById("menu2");e.click(),expect(e?.classList.contains("is-active")).toBe(!0),expect(o?.classList.contains("is-active")).toBe(!0),t.click(),expect(t?.classList.contains("is-active")).toBe(!0),expect(n?.classList.contains("is-active")).toBe(!0)}),it("does nothing when target is not found",()=>{document.body.innerHTML='\n                <div class="navbar-burger" data-target="nonexistent"></div>\n            ',setupNavBar();const e=document.querySelector(".navbar-burger");expect(()=>e.click()).not.toThrow()}),it("does nothing when no navbar burgers exist",()=>{document.body.innerHTML="<div></div>",expect(()=>setupNavBar()).not.toThrow()})}),describe("setupModal",()=>{it("opens modal when modal-target is clicked",()=>{document.body.innerHTML='\n                <div class="modal-target" data-target="test-modal"></div>\n                <div id="test-modal" class="modal"></div>\n            ',setupModal();const e=document.querySelector(".modal-target"),t=document.getElementById("test-modal");expect(t?.classList.contains("is-active")).toBe(!1),e.click(),expect(t?.classList.contains("is-active")).toBe(!0)}),it("closes all modals when delete button is clicked",()=>{document.body.innerHTML='\n                <div class="modal-target" data-target="modal1"></div>\n                <div class="modal-target" data-target="modal2"></div>\n                <div id="modal1" class="modal"></div>\n                <div id="modal2" class="modal"></div>\n                <div class="delete"></div>\n            ',setupModal();const[e,t]=document.querySelectorAll(".modal-target"),o=document.getElementById("modal1"),n=document.getElementById("modal2"),i=document.querySelector(".delete");e.click(),t.click(),expect(o?.classList.contains("is-active")).toBe(!0),expect(n?.classList.contains("is-active")).toBe(!0),i.click(),expect(o?.classList.contains("is-active")).toBe(!1),expect(n?.classList.contains("is-active")).toBe(!1)}),it("closes all modals when modal-background is clicked",()=>{document.body.innerHTML='\n                <div class="modal-target" data-target="modal1"></div>\n                <div id="modal1" class="modal"></div>\n                <div class="modal-background"></div>\n            ',setupModal();const e=document.querySelector(".modal-target"),t=document.getElementById("modal1"),o=document.querySelector(".modal-background");e.click(),expect(t?.classList.contains("is-active")).toBe(!0),o.click(),expect(t?.classList.contains("is-active")).toBe(!1)}),it("does nothing when target is not found",()=>{document.body.innerHTML='\n                <div class="modal-target" data-target="nonexistent"></div>\n            ',setupModal();const e=document.querySelector(".modal-target");expect(()=>e.click()).not.toThrow()}),it("does nothing when no modal elements exist",()=>{document.body.innerHTML="<div></div>",expect(()=>setupModal()).not.toThrow()})}),describe("openLink",()=>{it("toggles display from none to block",()=>{document.body.innerHTML='\n                <div class="open_links" style="display: none;">Link 1</div>\n                <div class="open_links" style="display: none;">Link 2</div>\n            ',openLink();const e=document.getElementsByClassName("open_links");expect(e[0].style.display).toBe("block"),expect(e[1].style.display).toBe("block")}),it("toggles display from block to none",()=>{document.body.innerHTML='\n                <div class="open_links" style="display: block;">Link 1</div>\n            ',openLink();const e=document.getElementsByClassName("open_links")[0];expect(e.style.display).toBe("none")}),it("handles multiple toggles",()=>{document.body.innerHTML='\n                <div class="open_links" style="display: none;">Link</div>\n            ';const e=document.getElementsByClassName("open_links")[0];openLink(),expect(e.style.display).toBe("block"),openLink(),expect(e.style.display).toBe("none"),openLink(),expect(e.style.display).toBe("block")}),it("does nothing when no open_links elements exist",()=>{document.body.innerHTML="<div></div>",expect(()=>openLink()).not.toThrow()})}),describe("initStringFormat",()=>{it("adds format method to String.prototype",()=>{expect(String.prototype.format).toBeUndefined(),initStringFormat(),expect(String.prototype.format).toBeDefined(),expect(typeof String.prototype.format).toBe("function")}),it("does not override existing format method",()=>{const e=vi.fn();String.prototype.format=e,initStringFormat(),expect(String.prototype.format).toBe(e)}),it("format method replaces {0}, {1}, etc. with arguments",()=>{initStringFormat();const e="Hello {0}, you are {1} years old".format("Alice",30);expect(e).toBe("Hello Alice, you are 30 years old")}),it("format method handles missing arguments",()=>{initStringFormat();const e="Hello {0}, you are {1} years old".format("Bob");expect(e).toBe("Hello Bob, you are {1} years old")}),it("format method handles multiple same placeholders",()=>{initStringFormat();const e="{0} + {0} = {1}".format(2,4);expect(e).toBe("2 + 2 = 4")}),it("format method handles non-string arguments",()=>{initStringFormat();const e="Number: {0}, Boolean: {1}, Null: {2}".format(42,!0,null);expect(e).toBe("Number: 42, Boolean: true, Null: null")})})});
