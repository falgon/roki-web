## 全般

- **MUST**: すべてのレスポンスは日本語で返すこと
- **MUST**: できる限りサブエージェントとスキルを活用すること
- **MUST**: prompt-engineer サブエージェント以外のサブエージェントを活用する際は、prompt-engineer サブエージェントにプロンプト生成を依頼し、その生成されたプロンプトを精査の上、サブエージェント呼び出し時に使用すること
- **MUST**: ハルシネーションを徹底的に避け、憶測や推測を基にタスクを進行せず、確固たる事実や背景、エビデンスをもってを確実に粛々と進行すること。そのための調査コストはどれだけ大きくなっても構わない。この時も適切なサブエージェントとスキルを活用すること
- **MUST**: タスクを与えられた際は、task-decomposition-expert サブエージェントを活用すること
- **MUST**: 複数のサブエージェントを跨ぐタスクは、context-manager サブエージェントを活用すること

## コマンド実行

- **MUST**: コマンド実行時は、command-expert サブエージェントを活用すること

## ソースコード全般

- **MUST**: ソースコードの編集時もサブエージェントとスキルを活用するべきであるが、その際は serena MCP を最大限活用させるよう指示すること
- **MUST**: ソースコードを編集したまたはされた場合は、必ずそのプロジェクトにおけるフォーマッター、静的解析、テストを実行し、通過することを確認すること
- **MUST**: ソースコードを編集したまたはされた場合は、必ずコミット前に code-reviewer サブエージェントにフィードバックを得
ること
- **MUST**: 実際の実装は、サブエージェント越しに Codex MCP を必ず使用するよう指示すること。オプションとして、workspace には、workspace-write を approval-policy には、never をつけて、Codex MCP を使用すること。また、Codexに振るタスクは細分化し、細か
く投げて、進捗を追いやすくすること。つまり、下記のサイクルを繰り返すこと:
    1. prompt-engineer サブエージェントでプロンプトを生成
    2. 実装に最適なサブエージェントを呼ぶ（内部で Codex MCP を利用）
    3. code-reviewer サブエージェントからフィードバックを得る
    4. 3 で問題が指摘された場合 1 に戻る。特にない場合はフォーマッター、静的解析、テストを実行
    5. 4 で問題が見つかった場合 1 に戻る。特にない場合はコミットに進む
- **MUST**: エラーや警告などの調査には error-detective サブエージェントを活用すること

## Git 操作

- **MUST**: git-commit-with-coauthor skill を使用すること

## データベース

- RDB でテーブルを設計する際は、第3正規形まで落とし込み、1つのカラムに json データを入れるといったようなテキスト形式でのデータ管理は可能な限り行わないでください。もし仮にそうでない設計を選択する場合は、その選択の合理性を必ず具体的に説明してください

## コーディングスタイル

- 無駄な do 文を避け、モナドや演算子を駆使してコードを記述してください
- 無駄な関数パラメータの記述を避け、ポイントフリースタイルでの記述を心がけてください。但し、あまりにも可読性やパフォーマンスが下がってしまうことは好ましく無いので、ポイントフリースタイルを敢えて避けた場合には、その理由が分かるようコメントを付けるようにしてください
- コードを編集したあとは、必ず stylish-haskell を該当コードファイルに対して実行して下さい。リポジトリルートの .stylish-haskell.yaml がその設定ファイルです

